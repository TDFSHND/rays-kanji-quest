<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ray's Kanji Quest</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@700;900&display=swap');
        body { font-family: 'Zen Maru Gothic', sans-serif; -webkit-tap-highlight-color: transparent; }
        .card-flip { perspective: 1000px; }
        .card-inner { transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; }
        .is-flipped { transform: rotateY(180deg); }
        .card-front, .card-back { backface-visibility: hidden; position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .card-back { transform: rotateY(180deg); }
        /* ãƒ’ãƒ³ãƒˆç”¨ã®åˆ‡ã‚ŠæŠœãï¼ˆå·¦å´ã ã‘è¦‹ã›ã‚‹ï¼‰ */
        .hint-mask { clip-path: inset(0 60% 0 0); filter: blur(1px); }
    </style>
</head>
<body class="bg-indigo-50 h-screen flex flex-col items-center p-6 overflow-hidden">

    <div class="w-full max-w-2xl flex justify-between items-center mb-8">
        <button onclick="location.reload()" class="bg-white px-4 py-2 rounded-full shadow text-indigo-500 font-bold">æœ€åˆã‹ã‚‰</button>
        <div id="progress" class="text-xl font-black text-indigo-400">1 / 6</div>
        <button onclick="toggleMode()" id="mode-badge" class="bg-orange-500 text-white px-4 py-2 rounded-full shadow font-bold text-sm">ã„ã¾ï¼šèª­ã¿</button>
    </div>

    <div id="game-screen" class="w-full max-w-2xl flex-1 flex flex-col items-center justify-center">
        <div class="card-flip w-full h-[450px]">
            <div id="card-inner" class="card-inner w-full h-full relative">
                
                <div onclick="flipCard()" class="card-front bg-white rounded-[3rem] shadow-2xl border-b-8 border-indigo-200 flex flex-col items-center justify-center p-8 text-center">
                    <div id="q-text" class="kanji-font leading-none text-slate-800"></div>
                    <div id="hint-display" class="hidden absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-[12rem] text-slate-300 hint-mask pointer-events-none"></div>
                    <div id="q-sub" class="mt-8 text-3xl text-indigo-400">ã‚¿ãƒƒãƒ—ã§ç­”ãˆ</div>
                </div>

                <div onclick="flipCard()" class="card-back bg-indigo-600 rounded-[3rem] shadow-2xl flex flex-col items-center justify-center p-8 text-center text-white">
                    <div id="a-text" class="leading-none mb-6"></div>
                    <div id="a-extra" class="text-4xl font-bold opacity-90"></div>
                </div>

            </div>
        </div>

        <div class="flex flex-col gap-4 w-full mt-8">
            <button id="hint-btn" onclick="showHint()" class="hidden w-full bg-yellow-400 text-yellow-900 py-3 rounded-2xl font-bold text-xl shadow-md active:scale-95 transition">
                ã‚ã‹ã‚“ãªã„ï¼ãƒ’ãƒ³ãƒˆğŸ’¡
            </button>
            
            <div class="flex gap-6 w-full">
                <button onclick="prev()" class="flex-1 bg-white text-indigo-500 py-6 rounded-3xl font-bold text-2xl shadow-lg border-b-4 border-indigo-100">ã‚‚ã©ã‚‹</button>
                <button onclick="next()" class="flex-1 bg-indigo-500 text-white py-6 rounded-3xl font-bold text-2xl shadow-lg border-b-4 border-indigo-700">ã¤ãã¸ï¼</button>
            </div>
        </div>
    </div>

    <script>
        const masterData = [
            { kanji: "å¤®", yomi: "ã‚ªã‚¦", imi: "ä¸­å¤®ï¼ˆã¡ã‚…ã†ãŠã†ï¼‰ã«ç«‹ã¤" },
            { kanji: "éš", yomi: "ã‚«ã‚¤", imi: "ä¸‰éšï¼ˆã•ã‚“ãŒã„ï¼‰ã«ã®ã¼ã‚‹" },
            { kanji: "å§”", yomi: "ã‚¤", imi: "å§”å“¡ï¼ˆã„ã„ã‚“ï¼‰ã«ãªã‚‹" },
            { kanji: "ç´š", yomi: "ã‚­ãƒ¥ã‚¦", imi: "é€²ç´šï¼ˆã—ã‚“ãã‚…ã†ï¼‰ãŠã‚ã§ã¨ã†" },
            { kanji: "æ˜­", yomi: "ã‚·ãƒ§ã‚¦", imi: "æ˜­å’Œï¼ˆã—ã‚‡ã†ã‚ï¼‰ã¨ã„ã†æ™‚ä»£" },
            { kanji: "å’Œ", yomi: "ãƒ¯", imi: "å¹³å’Œï¼ˆã¸ã„ã‚ï¼‰ã‚’å®ˆã‚ã†" }
        ];

        let currentIndex = 0;
        let isYomiMode = true;
        let flipped = false;

        function updateDisplay() {
            const data = masterData[currentIndex];
            const qText = document.getElementById('q-text');
            const aText = document.getElementById('a-text');
            const aExtra = document.getElementById('a-extra');
            const qSub = document.getElementById('q-sub');
            const hintBtn = document.getElementById('hint-btn');
            const hintDisp = document.getElementById('hint-display');

            hintDisp.classList.add('hidden'); // ãƒ’ãƒ³ãƒˆã‚’éš ã™
            hintDisp.innerText = data.kanji;

            if (isYomiMode) {
                qText.innerText = data.kanji;
                qText.className = "text-[12rem] leading-none text-slate-800";
                aText.innerText = data.yomi;
                aText.className = "text-[8rem] leading-none mb-6";
                aExtra.innerText = data.imi;
                qSub.innerText = "ãªã‚“ã¦èª­ã‚€ï¼Ÿ";
                hintBtn.classList.add('hidden');
            } else {
                qText.innerText = data.yomi;
                qText.className = "text-[5rem] leading-tight text-indigo-600 px-4";
                aText.innerText = data.kanji;
                aText.className = "text-[12rem] leading-none mb-6";
                aExtra.innerText = data.imi;
                qSub.innerText = "æ¼¢å­—ã§æ›¸ãã¨ï¼Ÿ";
                hintBtn.classList.remove('hidden');
            }

            document.getElementById('progress').innerText = `${currentIndex + 1} / ${masterData.length}`;
            resetCard();
        }

        function showHint() {
            document.getElementById('hint-display').classList.remove('hidden');
        }

        function flipCard() {
            flipped = !flipped;
            document.getElementById('card-inner').classList.toggle('is-flipped', flipped);
        }

        function resetCard() {
            flipped = false;
            document.getElementById('card-inner').classList.remove('is-flipped');
        }

        function next() {
            if (currentIndex < masterData.length - 1) {
                currentIndex++;
                updateDisplay();
            } else {
                alert("ãœã‚“ã¶ã‚¯ãƒªã‚¢ï¼Rayãã‚“ã€å¤©æ‰ã˜ã‚ƒãªã„ï¼ï¼ŸğŸ‘‘");
            }
        }

        function prev() {
            if (currentIndex > 0) {
                currentIndex--;
                updateDisplay();
            }
        }

        function toggleMode() {
            isYomiMode = !isYomiMode;
            document.getElementById('mode-badge').innerText = isYomiMode ? "ã„ã¾ï¼šèª­ã¿" : "ã„ã¾ï¼šæ›¸ã";
            document.getElementById('mode-badge').classList.toggle('bg-orange-500');
            document.getElementById('mode-badge').classList.toggle('bg-blue-600');
            updateDisplay();
        }

        updateDisplay();
    </script>
</body>
</html>
